"use strict";
exports.__esModule = true;
exports.normalizeText = exports.dataToList = exports.findJSONKey = exports.isJSONEmpty = void 0;
/**
 * @returns Whether the given json object is empty or not
 * @param data The input JSON object which needs to be checked
 */
function isJSONEmpty(data) {
    // If the JSON has any keys, it's not empty
    if (Object.keys(data).length == 0) {
        return true;
    }
    // Else, it's empty
    else {
        return false;
    }
}
exports.isJSONEmpty = isJSONEmpty;
/**
 * @returns The value associated with the given key inside the given json
 * @param data The json data within which to search for the value
 * @param key The key to search for
 * @param last Whether to begin searching from the end
 */
function findJSONKey(data, key, last) {
    if (last === void 0) { last = false; }
    var jsonStr = JSON.stringify(data); // To store the input data as string
    var extStr = ''; // To store the extracted string
    var len = jsonStr.length; // To store length of input data
    /**
     * Getting the position to start extracting data from
     * This the position just after the key plus ":"
     * */
    var start = !last ? (jsonStr.indexOf("\"".concat(key, "\"")) + "\"".concat(key, "\":").length) : (jsonStr.lastIndexOf("\"".concat(key, "\"")) + "\"".concat(key, "\":").length);
    for (var i = start; i < len; i++) {
        // Getting each character
        var char = jsonStr[i];
        // If not ending of value
        if (char != ',' && char != '\n') {
            extStr += char;
        }
        // If ending of value
        else {
            break;
        }
    }
    // Removing begginning and ending quotes from string
    /**
     * I don't know how this regex I used works. I just copied it from StackOverflow
     * Here is the link to the thread: https://stackoverflow.com/q/19156148
     */
    extStr = extStr.replace(/^"|"$/g, '');
    return extStr;
}
exports.findJSONKey = findJSONKey;
/**
 * @returns A list of data from a singleton data
 * @param data The data to be converted to a list
 */
function dataToList(data) {
    // If data is already a list
    if (Array.isArray(data)) {
        return data;
    }
    // If data is not array
    else {
        return [data];
    }
}
exports.dataToList = dataToList;
/**
 * @param text The text to be normalized
 * @returns The text after being formatted to remove unnecessary characters
 */
function normalizeText(text) {
    var normalizedText = ''; // To store the normalized text
    // Removing unnecessary full stops, and other characters
    normalizedText = text.replace(/\n/g, '.').replace(/[.]+[\s+.\s+]+/g, '. ');
    // Adding full-stop to the end if does not exist already
    normalizedText = normalizedText.endsWith('.') ? normalizedText : (normalizedText + '.');
    return normalizedText;
}
exports.normalizeText = normalizeText;
//# sourceMappingURL=Parser.js.map